<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-title>โปรไฟล์</ion-title>
    <ion-buttons slot="end">
      <ion-select interface="popover" [(ngModel)]="currentRole" placeholder="Role">
        <ion-select-option value="user">User (Host)</ion-select-option>
        <ion-select-option value="guest">Guest (New)</ion-select-option>
        <ion-select-option value="visitor">Visitor (Active)</ion-select-option>
      </ion-select>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding bg-light">

  <div *ngIf="currentRole === 'user'" class="profile-container">
    <div class="user-info ion-text-center">
      <ion-avatar class="profile-avatar">
      </ion-avatar>
      <h2>อ.สมหมาย ใจดี</h2>
      <p>Engineering - IoT Dept.</p>
    </div>
    <ion-list inset="true">
      <ion-item button detail>
        <ion-icon slot="start" name="settings-outline"></ion-icon>
        <ion-label>ตั้งค่าบัญชี</ion-label>
      </ion-item>
      <ion-item button detail color="danger">
        <ion-icon slot="start" name="log-out-outline"></ion-icon>
        <ion-label>ออกจากระบบ</ion-label>
      </ion-item>
    </ion-list>
  </div>


  <div *ngIf="currentRole === 'guest'" class="guest-container ion-text-center">
    <div class="guest-hero">
      <div class="icon-circle">
        <ion-icon name="qr-code-outline"></ion-icon>
      </div>
      <h2>ยินดีต้อนรับ ผู้มาติดต่อ</h2>
      <p>กรุณากรอกรหัสเชิญ (Invite Code) ที่ได้รับจากเจ้าหน้าที่เพื่อลงทะเบียนเข้าอาคาร</p>
    </div>

    <ion-card class="invite-card">
      <ion-card-content>
        <ion-item lines="none" class="input-item">
          <ion-label position="stacked">รหัสคำเชิญ (Invite Code)</ion-label>
          <ion-input placeholder="เช่น INV-1234" [(ngModel)]="inviteCode"></ion-input>
        </ion-item>
        <ion-button expand="block" (click)="verifyInviteCode()" [disabled]="!inviteCode">
          ตรวจสอบและลงทะเบียน
          <ion-icon slot="end" name="arrow-forward-outline"></ion-icon>
        </ion-button>
      </ion-card-content>
    </ion-card>
  </div>


  <div *ngIf="currentRole === 'visitor'" class="visitor-container">
    
    <ion-card class="access-card">
      <div class="card-header-strip">Visitor Pass</div>
      <ion-card-content class="ion-text-center">
        <div class="qr-placeholder">
          <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=HelloVisitor" alt="QR Code">
        </div>
        <h3 class="visitor-name">{{ visitorProfile?.firstName }} {{ visitorProfile?.lastName }}</h3>
        <p class="company-name">{{ visitorProfile?.company }}</p>
        
        <div class="access-badge">
          <ion-icon name="shield-checkmark-outline"></ion-icon>
          <span>Access Granted</span>
        </div>
        
        <p class="validity">ใช้ได้ถึง: 18:00 น. วันนี้</p>
      </ion-card-content>
    </ion-card>

    <div class="ion-text-center ion-margin-top">
      <ion-button fill="clear" color="medium" (click)="resetToGuest()">
        (Demo: ปุ่ม Reset กลับเป็น Guest)
      </ion-button>
    </div>
  </div>

</ion-content>
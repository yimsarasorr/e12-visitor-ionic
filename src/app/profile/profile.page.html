<ion-header>
  <ion-toolbar>
    <ion-title>Profile</ion-title>
    <ion-buttons slot="end">
      <ion-button *ngIf="currentRole !== 'guest'" (click)="logout()">
        <ion-icon slot="icon-only" name="log-out-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div *ngIf="currentRole === 'guest'" class="guest-container ion-text-center">
    <div class="welcome-box ion-margin-bottom">
      <ion-avatar class="profile-img-large">
        <img [src]="lineProfile?.pictureUrl || 'assets/icon/favicon.png'" />
      </ion-avatar>
      <h2>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì {{ lineProfile?.displayName || 'Guest' }}</h2>
      <p class="ion-text-muted">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</p>
    </div>

    <ion-card button (click)="openVisitorRegister()" class="role-card">
      <ion-card-content>
        <ion-icon name="people-outline" size="large" color="success"></ion-icon>
        <h3>‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (Visitor)</h3>
        <p>‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏°‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠, ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á, ‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå‡∏á‡∏≤‡∏ô</p>
      </ion-card-content>
    </ion-card>

    <ion-card button (click)="openKmitlLogin()" class="role-card">
      <ion-card-content>
        <ion-icon name="school-outline" size="large" color="primary"></ion-icon>
        <h3>‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ / ‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£</h3>
        <p>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ KMITL Account</p>
      </ion-card-content>
    </ion-card>
  </div>

  <div *ngIf="currentRole !== 'guest'">
    <ion-card class="profile-card">
      <ion-card-header>
        <ion-item lines="none">
          <ion-avatar slot="start">
            <img [src]="lineProfile?.pictureUrl" />
          </ion-avatar>
          <ion-label>
            <h2>{{ lineProfile?.displayName }}</h2>
            <p>
              ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:
              <ion-badge [color]="getRoleColor(currentRole)"
                >{{ currentRole | uppercase }}</ion-badge
              >
            </p>
          </ion-label>
        </ion-item>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item *ngIf="currentRole === 'user' || currentRole === 'host'">
            <ion-icon name="card-outline" slot="start"></ion-icon>
            <ion-label>‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤/‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£</ion-label>
            <ion-note slot="end">6XXXXXXX</ion-note>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <ion-card class="ion-margin-top" color="light">
      <ion-card-header>
        <ion-card-subtitle>‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏¢‡∏±‡∏á Line</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-button color="dark" expand="block" (click)="openLineOA()">
          <ion-icon name="chatbubbles-outline" slot="start"></ion-icon>
          LINE OA
        </ion-button>
      </ion-card-content>
    </ion-card>

    <!-- üîß Developer Zone (Test Menu) -->
    <ion-card class="ion-margin-top" style="border: 1px dashed red;">
      <ion-card-header>
        <ion-card-subtitle style="color: red;">Test Menu</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p class="ion-margin-bottom">Tools ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Rich Menu</p>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
          <ion-button color="dark" expand="block" (click)="openLineOA()">
            <ion-icon name="chatbubbles-outline" slot="start"></ion-icon>
            Back to OA
          </ion-button>
          <ion-button color="success" expand="block" (click)="debugSwitchRole('visitor')">Force Visitor</ion-button>
          <ion-button color="primary" expand="block" (click)="debugSwitchRole('host')">Force Host</ion-button>
          <ion-button color="tertiary" expand="block" (click)="debugSwitchRole('user')">Force User</ion-button>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>

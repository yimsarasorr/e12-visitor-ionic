<div class="access-list-container">
  
  <div class="list-header ion-padding-horizontal ion-padding-top ion-padding-bottom">
    <div class="header-row">
      <h3>พื้นที่ที่เข้าถึงได้</h3>
      <ion-badge color="light" *ngIf="accessibleRooms$ | async as rooms">
        {{ rooms.length }}
      </ion-badge>
    </div>
    <ion-note class="header-subtitle">แตะเพื่อดูตำแหน่งและรายละเอียด</ion-note>
  </div>

  <div class="list-content">
    <ng-container *ngIf="accessibleRooms$ | async as rooms">
      
      <div *ngIf="rooms.length === 0" class="empty-state ion-text-center ion-padding">
        <div class="empty-icon-circle">
          <ion-icon name="lock-closed-outline"></ion-icon>
        </div>
        <h4>ไม่พบรายการสิทธิ์</h4>
        <p class="ion-text-muted">กรุณาเลือก User หรือตรวจสอบสิทธิ์การเข้าถึง</p>
      </div>

      <ion-list lines="full" *ngIf="rooms.length > 0">
        <ion-item *ngFor="let room of rooms" 
                  button 
                  detail="true" 
                  (click)="focusRoom(room)"
                  class="room-item">
          
          <div slot="start" class="badge-container">
            <div class="color-dot" [style.background]="room.color"></div>
          </div>

          <ion-label>
            <h2 class="room-name">{{ room.name }}</h2>
            <div class="room-meta">
              <span class="meta-pill">ชั้น {{ room.floor }}</span>
              <span class="meta-dot">•</span>
              <span class="meta-text">{{ room.zoneName || 'โซนทั่วไป' }}</span>
            </div>
            
            <div class="door-tags" *ngIf="room.doors.length > 0">
              <span *ngFor="let door of room.doors" 
                    class="door-tag" 
                    [class.is-allowed]="door.allowed">
                {{ door.label }}
              </span>
            </div>
          </ion-label>
        </ion-item>
      </ion-list>
    </ng-container>
  </div>
</div>
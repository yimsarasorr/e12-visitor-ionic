<div class="map-container">
  <div id="map"></div>

  <div class="top-overlay">
    <div class="search-wrapper">
      <div class="search-bar">
        <span class="search-icon">üîç</span>
        <input
          #searchInput
          class="search-input"
          type="text"
          placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà..."
          [value]="currentSearchQuery"
          (input)="onSearchInput(searchInput.value)"
          (focus)="showSuggestions = true"
        />
        <span
          class="clear-icon"
          *ngIf="currentSearchQuery"
          (click)="clearSearch()"
        >‚úï</span>
      </div>

      <div
        class="search-suggestions"
        *ngIf="showSuggestions && (searchResults.length > 0 || isSearching)"
      >
        <div class="suggestion-item loading" *ngIf="isSearching">
          <span class="spinner-small"></span>
          ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...
        </div>
        <div
          class="suggestion-item"
          *ngFor="let result of searchResults"
          (click)="selectSearchResult(result)"
        >
          <span class="suggestion-icon">{{ result.isLocal ? 'üèõÔ∏è' : 'üìç' }}</span>
          <div class="suggestion-text">
            <span class="suggestion-name">{{ result.name }}</span>
            <span class="suggestion-address">{{ result.address }}</span>
          </div>
        </div>
      </div>

      <p class="search-error" *ngIf="searchError">‚ö†Ô∏è {{ searchError }}</p>
      <p class="search-status" *ngIf="!isSearching && searchResults.length === 0 && currentSearchQuery">
        ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå ‡∏•‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏Ñ‡∏≥‡∏≠‡∏∑‡πà‡∏ô‡∏î‡∏π‡∏ô‡∏∞
      </p>
    </div>

    <div class="zone-selector-wrapper">
      <label for="zoneSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà:</label>
      <select
        id="zoneSelect"
        class="zone-select"
        (change)="focusOnSelectedZone(zoneSelect.value)"
        #zoneSelect
      >
        <option *ngFor="let zone of zones" [value]="zone.hash">
          {{ zone.name }}
        </option>
      </select>
    </div>

    <div class="user-status" *ngIf="userGeoHash">
      üìç {{ userLat?.toFixed(4) }}, {{ userLng?.toFixed(4) }} ({{ userGeoHash }})
    </div>
  </div>

  <div class="fab-container">
    <button class="location-fab" (click)="focusOnUser()" title="‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô">
      üéØ
    </button>
  </div>

  <div class="error-toast" *ngIf="errorMessage">
    {{ errorMessage }}
  </div>
</div>